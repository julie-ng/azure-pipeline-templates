parameters:
  - name: serviceConnectionName
    type: string
    default: ''

  - name: azureContainerRegistry
    type: string
    default: ''

  - name: tags
    type: object
    default:
      - 'dev'

steps:
- ${{ each tag in parameters.tags }}:
  - script: echo 'tag - ${{ tag }}'
    displayName: 'echo tag'

- script: echo 'tag - ${{ parameters.tags[0] }}'
  displayName: 'try echo first tag'
  # - script: |
  #     docker build --tag ${{ parameters.snapshotTag }} .
  #     docker tag ${{ parameters.snapshotTag }} ${{ parameters.devTag }}
  #   displayName: "Docker: build and tag image"

  # - task: Docker@1 # Use the task to avoid embedding credentials in pipeline
  #   displayName: "Docker: login ACR"
  #   inputs:
  #     command: login
  #     azureSubscriptionEndpoint: ${{ parameteres.serviceConnectionName }}
  #     azureContainerRegistry: ${{ parameters.azureContainerRegistry }}

  # - script: docker push ${{ parameters.snapshotTag }}
  #   displayName: "Docker: push snapshot"

  # - script: docker push ${{ parameters.devTag }}
  #   displayName: "Docker: push dev"

  # - script: docker logout  ${{ parameters.azureContainerRegistry }}
  #   displayName: "Docker: logout ACR"